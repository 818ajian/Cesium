<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>水系制作</title>
    <link rel="stylesheet" href="../lib/Cesium-1.51/Build/Cesium/Widgets/widgets.css">
    <script src="../lib/Cesium-1.51/Build/Cesium/Cesium.js"></script>
    <style>
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000000;
        }
    </style>

</head>

<body>
<div id="cesiumContainer">
</div>
<script>

    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwMDVjODczYy1kMzkxLTQ1OGUtYjAwOS01MDRlN2QzOTExYTgiLCJpZCI6NTM3Mywic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU0MzE5NzM1NH0.RqX0BJWiIngpnINQpX5S7-4Gb16v85X2PPl6DfnGvCw';

    var viewer = new Cesium.Viewer('cesiumContainer', {
        imageryProvider: new Cesium.UrlTemplateImageryProvider({
            url: 'http://www.google.cn/maps/vt?lyrs=s@716&x={x}&y={y}&z={z}'
        })
    });
    //河道关键点数组
    var RiverPoint = [
        114.3460187633783, 30.50534512847193, 114.3442621004240, 30.50205930103183, 114.3390516639907, 30.50149822941456, 114.3360192686527, 30.49602100828544, 114.3395300728791, 30.49487573723677, 114.3434930208593, 30.49488521675117, 114.3423320434395, 30.49236577583717, 114.3436062751276, 30.49135029278489, 114.3427622582819, 30.48489180017585, 114.3462452585887, 30.48331390026167, 114.3572560601605, 30.48214665949717, 114.3646369567596, 30.48354875624866, 114.3659378489116, 30.48297047817379, 114.3640185457744, 30.47921270986857, 114.3636614723859, 30.47654218315460, 114.3622528952508, 30.47427417607666, 114.3637782974084, 30.47172594655828, 114.3623026814237, 30.46827040463999, 114.3659523434297, 30.46822087513493, 114.3666299935505, 30.47189094815884, 114.3672689177462, 30.47310323683429, 114.3718788248617, 30.47388849451284, 114.3727022970004, 30.47517486667973, 114.3719615189179, 30.47625293382607, 114.3729373648269, 30.47776421237632, 114.3711857254921, 30.47947967098940, 114.3707305817875, 30.48144342131032, 114.3713811497156, 30.48329605383395, 114.3775617637802, 30.48166290278611, 114.3833913474963, 30.48149210751835, 114.3830940255847, 30.48333878096246, 114.3827161976992, 30.48451660197861, 114.3842309390404, 30.48580987338828, 114.3853728371610, 30.48613147356015, 114.3861483231051, 30.48718908472907, 114.3858499899258, 30.48879643279427, 114.3859196245621, 30.49083886489808, 114.3835123312343, 30.49185647686441, 114.3821119730994, 30.49143452123009, 114.3800771546198, 30.49100569428736, 114.3796284069882, 30.49135449803709, 114.3784435676365, 30.49099009598903, 114.3771987115127, 30.49128355323173, 114.3740319024673, 30.49044657440903, 114.3736902607468, 30.48939880350653, 114.3722259904198, 30.48857352569152, 114.3702542972827, 30.48827285885745, 114.3674898155290, 30.48870482818616, 114.3665982037728, 30.48961921803740, 114.3671773464809, 30.49043053148523, 114.3679667509746, 30.49099035549189, 114.3679477512815, 30.49223557810974, 114.3679122064894, 30.49306181822753, 114.3677387965635, 30.49385666055407, 114.3655501839326, 30.49485921710986, 114.3650554931335, 30.49621409526114, 114.3650068332278, 30.49664974728661, 114.3618970676563, 30.49678939718442, 114.3596665223050, 30.49762946768140, 114.3584314212950, 30.49729526423901, 114.3571058476180, 30.49754586667976, 114.3561662189365, 30.49988256032968, 114.3535618162961, 30.50034809869577, 114.3530341861501, 30.49994761246512, 114.3520031215478, 30.50175931741548, 114.3534694819805, 30.50355208472512, 114.3537296911896, 30.50516554217770, 114.3521238253801, 30.50548649561986, 114.3513333014215, 30.50525984419922, 114.3503913296053, 30.50599389490133, 114.3474420681624, 30.50588076272040, 114.3460187633783, 30.50534512847193
    ];

    //河道多边形
    var polygon = new Cesium.PolygonGeometry({
        polygonHierarchy: new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(RiverPoint)),
        extrudedHeight: 0,
        height: 0,
        vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT
    });

    var river = new Cesium.Primitive({
        geometryInstances: new Cesium.GeometryInstance({
            geometry: polygon
        }),
        appearance: new Cesium.EllipsoidSurfaceAppearance({
            aboveGround: true
        }),
        show: true
    });

    var river_Material = new Cesium.Material({
        fabric: {
            type: 'Water',
            uniforms: {
                normalMap: 'images/water_1.jpg',
                frequency: 100.0,
                animationSpeed: 0.01,
                amplitude: 10.0
            }
        }
    });

    var scene = viewer.scene;
    river.appearance.material = river_Material;
    scene.primitives.add(river);           //添加到场景

    //设置照相机位置与朝向、设置home的默认值
    var homeCameraView = {
        destination: new Cesium.Cartesian3(-2271621.685463081, 5016494.487496823, 3219575.636482522),
        orientation: {
            heading: 6.116841224528264,
            pitch: -1.4499267978780082,
            roll: 6.279061616965462
        }
    };
    viewer.scene.camera.setView(homeCameraView);

</script>
</body>

</html>